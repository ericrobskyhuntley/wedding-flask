{% extends 'base.html' %}

{% block content %}
<form method="post">
    {% if error %}
    <p class = "error">{{error}}</p>
    {% else %}
    <h2>{{party.Name}}</h2>
    {% for p in people %}
    <div class = "person-rsvp">
        <h3>{{p.Name}}</h3>
        <div id = {{p.rsvp_id}} class = "question">
            <label>Will you be attending?</label>
            <select name = {{p.rsvp_id}}>
                <option {% if not party.Reply %}selected{% endif %}></option>
                <option value = "yes" {% if p.RSVP %}selected{% endif %}>Yes!</option>
                <option value = "no" {% if not p.RSVP and party.Reply %}selected{% endif %}>No!</option>
            </select>
        </div>
        {% if p.RSVP %}
            <div class = "question">
                <label>Would this person prefer a vegetarian or vegan meal?</label>
                <select name = {{p.meal_id}}>
                    <option {% if not p.Meal %}selected{% endif %}></option>
                    <option value = "veggie" {% if p.Meal[0] == "Vegetarian" %}selected{% endif %}>Vegetarian</option>
                    <option value = "vegan" {% if p.Meal[0] == "Vegan" %}selected{% endif %}>Vegan</option>
                </select>
            </div> 
            {% if not p.Email %}
            <div class = "question">
                <label>We didn't have this person's email address. Enter it if they'd like email updates.</label>
                <input type="text" name="{{p.email_id}}"
                    placeholder="Enter your email address."
                    value="{{ request.form['email_id'] }}"></input>
            </div>
            {% endif %}
            <div class = "question">
                <label>Anything else we should know?</label>
                <input type="text" name="{{p.ae_id}}"
                        value="{{ p.AnythingElse }}"></input>
            </div>
        {% endif %}
    </div>
    {% endfor %}
    {% endif %}
    <br>
    <button type="submit">Submit</button>
</form>
{% endblock %}